(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{353:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"note-page",attrs:{mb:""}},[n("transition",{attrs:{name:"fade"}},[t.share.md5&&!t.note?n("div",{staticClass:"share"},[n("m-note",{attrs:{type:"c666"}}),t._v(" "),n("Card",{staticStyle:{width:"350px"}},[n("div",{staticClass:"head",attrs:{slot:"title"},slot:"title"},[t.user?[n("Photo",{attrs:{photo:t.user.account.photo,size:"32",circle:""}}),t._v(" "),n("em",[t._v(t._s(t.user.account.name))])]:t._e(),t._v("\n                    给您加密分享了笔记\n                ")],2),t._v(" "),n("Form",{attrs:{model:t.share,"label-position":t.top},nativeOn:{submit:function(t){t.preventDefault()}}},[n("FormItem",{attrs:{label:"请输入提取码:"}},[n("Input",{attrs:{autofocus:"",clearable:"",placeholder:"提取码"},on:{blur:t._intoView,"on-enter":t.doTokenShare},model:{value:t.share.token,callback:function(e){t.$set(t.share,"token",e)},expression:"share.token"}},[n("div",{attrs:{slot:"append"},on:{click:t.doTokenShare},slot:"append"},[t._v("提取笔记")])])],1)],1)],1)],1):t._e()]),t._v(" "),t.note?n("author-menu",{attrs:{drawerClass:"note-page",layout:"mb",user:t.user}},[n("div",{ref:"outline",staticClass:"vditor",attrs:{slot:"toc"},slot:"toc"})]):t._e(),t._v(" "),n("div",{staticClass:"md"},[t.loading?n("Spin",{attrs:{fix:""}}):t._e(),t._v(" "),t.note?n("div",{staticClass:"float-container"},[n("float",{directives:[{name:"great",rawName:"v-great",value:16,expression:"16"}],attrs:{icon:t._icon.thumb,mb:""},nativeOn:{click:function(e){return t.doGreat(t.note)}}},[t._v(t._s(t.note.statics.great)+"赞")]),t._v(" "),n("float",{attrs:{icon:t._icon.user,mb:""}},[t._v(t._s(t.note.statics.pv)+"浏览")])],1):t._e(),t._v(" "),n("div",{directives:[{name:"back-top",rawName:"v-back-top"}],ref:"scroll",staticClass:"scroll",on:{scroll:t.onScroll}},[t.note?n("Author",{attrs:{user:t.user,layout:"author",date:t.note.time.create}}):t._e(),t._v(" "),t.user?n("Editor",{ref:"editor",attrs:{"user-preview":t.user.preview},on:{"on-after":t.onAfter}}):t._e(),t._v(" "),n("div",{staticClass:"bottom"},[t.loading?t._e():n("forward",{attrs:{user:t.user,note:t.note}}),t._v(" "),t.folder?n("div",{staticClass:"neighbor"},[n("Awesome",{attrs:{icon:t._icon.folderA}}),t._v("\n                    目录:\n                    "),n("a",{attrs:{target:"_blank",href:t._getFolderLink(t.folder)}},[t._v(t._s(t.folder.name))])],1):t._e(),t._v(" "),t.preNote?n("div",{staticClass:"neighbor"},[n("Icon",{attrs:{type:"ios-link"}}),t._v("\n                    上一篇:\n                    "),n("a",{attrs:{target:"_blank",href:t._getNoteLink(t.preNote)}},[t._v(t._s(t.preNote.name))])],1):t._e(),t._v(" "),t.nextNote?n("div",{staticClass:"neighbor"},[n("Icon",{attrs:{type:"ios-link"}}),t._v("\n                    下一篇:\n                    "),n("a",{attrs:{target:"_blank",href:t._getNoteLink(t.nextNote)}},[t._v(t._s(t.nextNote.name))])],1):t._e()],1)],1)],1)],1)};o._withStripped=!0;var s=n(357),r=n(358),a=n(392),i=n(375),c=n(373),l=n(120),u=n(184),d=n(403),h={mixins:[a.a],components:{MNote:u.a,Forward:d.a,Author:r.a,Photo:l.a,Float:i.a,Editor:c.a,AuthorMenu:s.a}},f=(n(428),n(3)),p=Object(f.a)(h,o,[],!1,null,null,null);p.options.__file="src/note/mb.vue";e.default=p.exports},362:function(t,e,n){},367:function(t,e,n){},372:function(t,e,n){"use strict";var o=n(362);n.n(o).a},375:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"float",style:t.style},[t.icon?n("awesome",{attrs:{icon:t.icon,size:t.iconSize}}):[t._v("\n        "+t._s(t.text)+"\n    ")],t._v(" "),t.$slots.default?n("div",{staticClass:"extra",style:t.extraStyle},[t._t("default")],2):t._e()],2)};o._withStripped=!0;var s={props:{size:{type:Number,default:48},icon:{type:String,default:""},text:{type:String,default:"无"}},computed:{style:function(){return{width:this.size+"px",height:this.size+"px",fontSize:Math.round(this.size/50*14)+"px",marginBottom:Math.round(this.size/5*4)+"px"}},iconSize:function(){return Math.round(this.size/50*18)},extraStyle:function(){return{fontSize:Math.round(this.size/50*12)+"px",top:this.size+5+"px"}}}},r=(n(372),n(3)),a=Object(r.a)(s,o,[],!1,null,null,null);a.options.__file="src/component/common/float.vue";e.a=a.exports},391:function(t,e,n){"use strict";var o=n(367);n.n(o).a},392:function(t,e,n){"use strict";var o,s,r,a=n(5),i=n.n(a),c=n(12),l=n.n(c),u=n(1);e.a={data:function(){var t=u.a.util.query2Json(),e=window.location.pathname,n="";return 0===e.indexOf("/s/")&&(n=e.replace("/s/","")),{share:{md5:n,token:t.t},query:t,note:null,user:null,folder:null,preNote:null,nextNote:null}},mounted:(r=l()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.query.n&&!this.share.md5){t.next=5;break}return t.next=3,this.loadNoteFolderUser();case 3:t.next=6;break;case 5:this._open404("缺少参数n");case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),methods:{doTokenShare:function(){var t=this.share.token.trim();t?(this.share.token=t,this.loadNoteFolderUser()):this._messageWarning("请先输入提取码")},doGreat:function(t){u.a.blog.great(t._id).then((function(e){var n=e.code,o=e.data;0===n&&(t.statics=o.statics)}))},onScroll:function(t){this.$refs.editor.onScroll(t)},loadNoteNeighbor:(s=l()(i.a.mark((function t(){var e,n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.blog.getNoteNeighbor({folderId:this.note.folderId,noteId:this.note._id,index:this.note.index});case 2:e=t.sent,n=e.code,o=e.data,0===n&&(this.preNote=o.preNote,this.nextNote=o.nextNote);case 6:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)}),onAfter:function(){this.loading=!1},doPreview:function(){this.$refs.editor&&this.$refs.editor.doPreview(this.note.md,this.$refs.outline),this.loading=!1},loadNoteFolderUser:(o=l()(i.a.mark((function t(){var e,n,o,s,r,a,c,l,d,h,f,p,v,_=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.query.n,n=this.share,o=n.md5,s=n.token,this.loading=!0,t.next=5,u.a.blog.getNote({noteId:e,md5:o,token:s});case 5:r=t.sent,a=r.code,c=r.data,0===a&&(l=c.access,d=c.share,h=c.note,f=c.folder,p=c.msg,(v=c.user)&&(this.user=v,this._updateFavicon(this.user)),d?(this.share=d,document.title=this.user.account.name+"的加密分享",s&&this._messageWarning("提取码有误")):l?(this.note=h,document.title=this.note.name,this.folder=f,this.loadNoteNeighbor(),u.a.blog.pv(h._id).then((function(t){t.code;var e=t.data;_.note.statics=e.statics})),this.$nextTick(this.doPreview)):this._open404(p));case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}}},394:function(t,e,n){},403:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.note?n("div",{staticClass:"forward"},[n("p",[t._v("文章版权：\n        "),n("Author",{attrs:{user:t.user,layout:"copyRight"}})],1),t._v(" "),n("p",[t._v("本文链接：\n        "),n("a",{attrs:{href:t.noteLink}},[t._v(t._s(t.noteLink))])]),t._v(" "),n("p",[t._v("转载请注明文章原始出处 !")]),t._v(" "),t.isMobile?t._e():n("AwesomeQr",{attrs:{config:t.config}},[n("div",{staticClass:"tip"},[t._v("扫描二维码,在手机阅读！")])])],1):t._e()};o._withStripped=!0;var s=n(358),r=n(1),a={components:{Author:s.a,AwesomeQr:function(){return Promise.all([n.e(38),n.e(29)]).then(n.bind(null,448))}},data:function(){return{isMobile:r.a.util.isMobile}},props:{note:Object,user:Object},computed:{config:function(){return{text:this.noteLink,bgSrc:this.user.account.photo?"/upload/"+this.user.account.photo:"",size:800,backgroundDimming:"rgba(0, 0, 0, 0.1)",margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, .4)",dotScale:.35,correctLevel:1,maskedDots:!1,whiteMargin:!1,autoColor:!0}},noteLink:function(){return this._getClearNoteLink(this.note)}}},i=(n(391),n(3)),c=Object(i.a)(a,o,[],!1,null,null,null);c.options.__file="src/component/common/forward.vue";e.a=c.exports},428:function(t,e,n){"use strict";var o=n(394);n.n(o).a}},0,[38,29]]);