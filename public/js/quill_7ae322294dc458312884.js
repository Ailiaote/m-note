(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{469:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("QuillEditor",{ref:"quillEditor",attrs:{options:e.editorOption},model:{value:e.proxy,callback:function(t){e.proxy=t},expression:"proxy"}})};n._withStripped=!0;var r=i(5),o=i.n(r),a=i(12),l=i.n(a),s=(i(458),i(459),i(460),i(467)),u=i(465),c=i(466),d=i.n(c),g=i(25),p=i.n(g),m=i(13),f=i.n(m);s.a.register("modules/imageResize",d.a),s.a.register("modules/imageDrop",u.a),s.a.register("modules/imagePaste",(function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p()(this,e),f()(this,"handlePaste",(function(e){var t,n,r,o=e.clipboardData;if(o&&(t=o.items)){n=t[0],r=o.types||[];for(var a=0;a<r.length;a++)if("Files"===r[a]){n=t[a];break}if(n&&"file"===n.kind&&n.type.match(/^image\//i)){e.preventDefault();var l=n.getAsFile(),s=i.config.addImageBlob;s&&"[object Function]"==={}.toString.call(s)?s(l,i.insertImg):i.toBase64(l)}}})),f()(this,"toBase64",(function(e){var t=new FileReader;t.onload=function(e){i.insertImg(e.target.result)},t.readAsDataURL(e)})),f()(this,"insertImg",(function(e){var t=(i.quill.getSelection()||{}).index||i.quill.getLength()-1;i.quill.insertEmbed(t,"image",e,"user"),setTimeout((function(){i.quill.setSelection(t+1)}),0)})),this.quill=t,this.config=n,t.root.addEventListener("paste",this.handlePaste,!1)}));var h,v={components:{QuillEditor:s.b},props:{value:String,uploadFile:{type:Function,required:!0},tool:{type:Array,default:function(){return[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["image"]]}}},created:function(){var e=document.createElement("input");e.type="file",e.accept="image/png, image/jpeg, image/gif, image/jpg",e.onchange=this.fileChange,e.style.display="none",document.body.appendChild(e),this.trigger=e},beforeDestroy:function(){document.body.removeChild(this.trigger)},watch:{value:function(e){this.proxy=e},proxy:function(e){this.$emit("input",e)}},data:function(){var e,t=this;return{proxy:this.value,editorOption:{placeholder:"请输入...",theme:"snow",modules:{toolbar:{container:this.tool,handlers:{image:function(e){t.trigger.value="",e?t.trigger.click():t.$refs.quillEditor.quill.format("image",!1)}}},imageDrop:!0,imageResize:{displayStyles:{backgroundColor:"black",border:"none",color:"white"},modules:["Resize","DisplaySize","Toolbar"]},imagePaste:{addImageBlob:(e=l()(o.a.mark((function e(i,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.uploadFile(i);case 2:(r=e.sent)&&n(r);case 4:case"end":return e.stop()}}),e)}))),function(t,i){return e.apply(this,arguments)})}}}}},methods:{fixClear:function(){var e=this.$refs.quillEditor.quill.theme.modules.imageResize;e&&e.hide()},fileChange:(h=l()(o.a.mark((function e(t){var i,n,r,a,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.target,n=i.files[0],e.next=4,this.uploadFile(n);case 4:(r=e.sent)&&(a=this.$refs.quillEditor.quill,l=a.getSelection().index,a.insertEmbed(l,"image",r),a.setSelection(l+1));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})}},b=i(3),y=Object(b.a)(v,n,[],!1,null,null,null);y.options.__file="common/component/quill/editor.vue";t.default=y.exports}}]);